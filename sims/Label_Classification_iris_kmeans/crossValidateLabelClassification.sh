# ===================================================================================================
# Script        : crossValidateLabelClassification.sh
# Usage         : ./crossValidateLabelClassification.sh [simDirectory]
# Purpose       : Performs a cross-validated paired test on parameter data set using a neuron
#                 labeling scheme
#
# Preconditions : - All required simulation-related programs are present
#                 - Data set as directory name in dataset directory must exist and be in correct form
#                   (i.e. no header, one record per line, comma delimited, last value is class label)
# ===================================================================================================

#!/bin/bash

# ===================================================================================================
# Function : validateSystem(simDirectory)
# Purpose  : Validates components required for cross validation run (based on simDirectory)
# Return   : None
# ===================================================================================================

validateSystem() {
	
	# check for correct number of parameters
	if [ -z ${1} ]; then
		echo "Usage: ./crossValidate.sh [simDirectory]"
		exit
	fi
	
	echo "Status: Validating system..."
	echo "=============================================="
	
	# check for data directory
	echo -n "Simulation directory \"${1}\"...  "
	if [ ! -d ../../datasets/${1} ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for original data file in simulation directory
	echo -n "Data file \"${1}/original/${1}.data\"...  "
	if [ ! -f ../../datasets/${1}/original/${1}.data ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for cross validation set building script
	echo -n "Cross validation set building script...  "
	if [ ! -f ../../algorithms/BuildSets/BuildSets.class ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for SOM_PAK data conversion script
	echo -n "Conversion script \"${1}/convert_som.awk\"...  "
	if [ ! -f ./../../datasets/${1}/convert_som.awk ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for SOM_PAK names script
	echo -n "Names script \"${1}/names_som.sh\"...  "
	if [ ! -f ./../../datasets/${1}/names_som.sh ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for SOM_PAK initialisation program
	echo -n "SOM initialisation program...  "
	if [ ! -f ../../algorithms/SOM_PAK/lininit ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for SOM_PAK training program
	echo -n "SOM training program...  "
	if [ ! -f ../../algorithms/SOM_PAK/vsom ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for example-centric neuron labeling program
	echo -n "Example-centric neuron labeling program...  "
	if [ ! -f./../../algorithms/ExampleCentricNeuron/classify ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for example-centric K-means cluster labeling program
	echo -n "Example-centric K-means cluster labeling program...  "
	if [ ! -f./../../algorithms/ExampleCentricClusterKMeans/classify ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for example-centric Ward cluster labeling program
	echo -n "Example-centric Ward cluster labeling program...  "
	if [ ! -f./../../algorithms/ExampleCentricClusterWard/classify ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	# check for weight-centric neuron labeling program
	echo -n "Weight-centric neuron labeling program...  "
	if [ ! -f./../../algorithms/WeightCentricNeuron/classify ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	#check for results averaging program
	echo -n "Results averaging program...  "
	if [ ! -f ../../algorithms/AverageRunResults/AverageLabelClassificationResults.class ]; then
		echo "NOT FOUND"
		exit
	fi
	echo "FOUND"
	
	echo "=============================================="
	echo "Status: System OK..."
	
}

# ===================================================================================================
# Function : buildSets(simDirectory)
# Purpose  : Builds data sets required for cross validation simulations (based on simDirectory)
# Return   : None
# ===================================================================================================

buildSets() {
	
	echo "Status: Performing cross validation set builds"
	
	# build raw training and test sets (must still be converted to SOM_PAK format)
	if [ ${1} == "ionosphere" ]; then
		echo "Status: Building set for IONOSPHERE database"
		echo "=============================================="
		java BuildSets ../../datasets/${1}/original/${1}.data , 30 -normalise
	elif [ ${1} == "iris" ]; then
		echo "Status: Building set for IRIS database"
		echo "=============================================="
		java BuildSets ../../datasets/${1}/original/${1}.data , 30 -normalise
	elif [ ${1} == "monks1" ]; then
		echo "Status: Building set for MONKS1 database"
		echo "=============================================="
		java BuildSets ../../datasets/${1}/original/${1}.data , 30
	elif [ ${1} == "monks2" ]; then
		echo "Status: Building set for MONKS2 database"
		echo "=============================================="
		java BuildSets ../../datasets/${1}/original/${1}.data , 30
	elif [ ${1} == "monks3" ]; then
		echo "Status: Building set for MONKS3 database"
		echo "=============================================="
		java BuildSets ../../datasets/${1}/original/${1}.data , 30 5
	elif [ ${1} == "pima" ]; then
		echo "Status: Building set for PIMA database"
		echo "=============================================="
		java BuildSets ../../datasets/${1}/original/${1}.data , 30 -normalise
	else
		echo "Status: Unrecognised set"
		echo "Status: Building default"
		echo "=============================================="
		java BuildSets ../../datasets/${1}/original/${1}.data , 30
	fi
	
	echo "=============================================="
	echo "Status: Cross validation sets built"
	
	echo -n "Status: Performing data set conversions...  "
	
	# create SOM names file
	./../../datasets/${1}/names_som.sh > ${1}.names
	
	# perform conversion of data set from raw form to SOM_PAK format, creating [simulation].data
	for ((dataset = 0; dataset < 30; ++dataset))
	do
		gawk -f ./../../datasets/${1}/convert_som.awk ${1}.data.raw.${dataset}.train > ${1}.data.${dataset}.som.train
		rm -f ${1}.data.raw.${dataset}.train
		gawk -f ./../../datasets/${1}/convert_som.awk ${1}.data.raw.${dataset}.test > ${1}.data.${dataset}.som.test
		rm -f ${1}.data.raw.${dataset}.test
	done
	
	echo "DONE"
	
}

# ===================================================================================================
# Function : runCrossValidation(simDirectory, neuronLabelingMethod, mapDim, learningRate,
#            learningRateDecay, kernelWidth, radiusDecay)
# Purpose  : Performs a single cross validation using provided parameters
# Return   : None
# ===================================================================================================

runCrossValidation () {
	
	# get description string for neuron labeling method (0 = neuron; 1 = K-means cluster; 2 = Ward cluster; 3 = weight-centric)
	if [ ${2} -eq 0 ]; then
		neuronLabelingMethodDescription="neuron"
	elif [ ${2} -eq 1 ]; then
		neuronLabelingMethodDescription="k-means"
	elif [ ${2} -eq 2 ]; then
		neuronLabelingMethodDescription="ward"
	elif [ ${2} -eq 3 ]; then
		neuronLabelingMethodDescription="weight-centric"
	fi
	
	if [ -f label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.accuracy ]; then
		rm -f label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.accuracy
	fi
	
	if [ -f label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.error ]; then
		rm -f label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.error
	fi
	
	for ((simNum = 0; simNum < 30; ++simNum))
	do
		echo -n "${simNum} "
		
		# execute SOM_PAK
		sleep 1
		./../../algorithms/SOM_PAK/vsom -din ${1}.data.${simNum}.som.train -vin ${1}.data.${simNum}.som.train -cin ${1}.${3}.${simNum}.map -cout ${1}.${3}.${simNum}.map.out -lrate ${4} -lratedecay ${5} -radius ${6} -radiusdecay ${7} -rand 0 >> /dev/null 2> /dev/null
		
		# execute appropriate neuron labeling algorithm on SOM_PAK output, and generate classification accuracy and error output
		sleep 1
		if [ ${2} -eq 0 ]; then
			./../../algorithms/ExampleCentricNeuron/classify ${1}.${3}.${simNum}.map.out ${1}.data.${simNum}.som.train ${1}.data.${simNum}.som.test ${1}.names label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.accuracy label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.error > /dev/null
		elif [ ${2} -eq 1 ]; then
			./../../algorithms/ExampleCentricClusterKMeans/classify ${1}.${3}.${simNum}.map.out ${1}.data.${simNum}.som.train ${1}.data.${simNum}.som.test ${1}.names label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.accuracy label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.error > /dev/null
		elif [ ${2} -eq 2 ]; then
			./../../algorithms/ExampleCentricClusterWard/classify ${1}.${3}.${simNum}.map.out ${1}.data.${simNum}.som.train ${1}.data.${simNum}.som.test ${1}.names label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.accuracy label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.error > /dev/null
		elif [ ${2} -eq 3 ]; then
			./../../algorithms/WeightCentricNeuron/classify ${1}.${3}.${simNum}.map.out ${1}.data.${simNum}.som.train ${1}.data.${simNum}.som.test ${1}.names label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.accuracy label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.error > /dev/null
		fi
		
		# clean up
		rm -f *.map.out
	done
	
	# calculate confidence intervals
	java AverageLabelClassificationResults -accuracy label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.accuracy label-classification_${1}_${neuronLabelingMethodDescription}.accuracy.summary
	java AverageLabelClassificationResults -error label-classification_${1}_${neuronLabelingMethodDescription}_dim_${3}_lr_${4}_lrd_${5}_kw_${6}_kwd_${7}.error label-classification_${1}_${neuronLabelingMethodDescription}.error.summary
	
	echo ""
	
}

# ===================================================================================================
# Function : runSims(simDirectory)
# Purpose  : Runs simulations for specified simDirectory [assumes built data sets]
# Return   : None
# ===================================================================================================

runSims () {
	
	echo "Status: Running simulations"
	echo "=============================================="
	
	# number of current simulation
	currentSimulation=1
	
	# neuron labeling method (0 = neuron; 1 = K-means cluster; 2 = Ward cluster; 3 = weight-centric)
	neuronLabelingMethod=1
	
	# SOM map dimension: (integer) [2:inf] (No default)
	mapDimensions=(2 7 10 5 6 11 8 3 4 9 11 6 5 10 8 3 3 8 10 5 7 12 9 4 4 9 11 6 5 10 7 2 2 7 10 5 6 11 9 4 4 9 12 7 6 11 8 3 3 8 10 5 7 12 9 4 3 8 11 6 5 10 7 2 2 7 10 5 6 11 8 3 4 9 12 7 5 10 8 3 3 8 11 6 7 12 9 4 4 9 11 6 5 10 8 3 2 7 10 5 6 11 9 4 4 9 12 7 6 11 8 3 3 8 10 5 6 11 9 4 3 8 11 6 5 10 7 2 2 7 10 5 6 11 8 3 4 9 11 6 5 10 8 3 3 8 11 6 7 12 9 4 4 9 11 6 5 10 7 2 3 8 10 5 6 11 9 4 4 9 12 7 6 11 8 3 3 8 10 5 7 12 9 4 4 9 11 6 5 10 7 2 2 7 10 5 6 11 8 3 4 9 12 7 5 10 8 3 3 8 11 6 7 12 9 4 4 9 11 6 5 10 8 3 2 7 10 5 6 11 9 4 4 9 12 7 5 10 8 3 3 8 10 5 6 11 9 4 3 8 11 6 5 10 7 2 2 7 10 5 6 11 8 3 4 9 11 6 5 10 8 3 3 8 10 5 7 12 9 4 4 9 11 6 5 10 7 2 3 8 10 5 6 11 9 4 4 9 12 7 6 11 8 3 3 8 10 5 7 12 9 4 3 8 11 6 5 10 7 2 2 7 10 5 6 11 9 4 4 9 12 7 5 10 8 3 3 8 11 6 7 12 9 4 4 9 11 6 5 10 8 3 2 7 10 5 6 11 9 4 4 9 12 7 6 11 8 3 3 8 10 5 7 12 9 4 3 8 11 6 5 10 7 2 2 7 10 5 6 11 8 3 4 9 11 6 5 10 8 3 3 8 11 6 7 12 9 4 4 9 11 6 5 10 7 2 3 8 10 5 6 11 9 4 4 9 12 7 6 11 8 3 3 8 10 5 7 12 9 4 4 9 11 6 5 10 7 2 2 7 10 5 6 11 8 3 4 9 12 7 5 10 8 3 3 8 11 6 7 12 9 4 4 9 11 6 5 10 7 2 2 7 10 5 6 11 9 4 4 9 12 7 5 10 8 3 3 8 10 5 6 11 9 4 3 8 11 6 5 10 7 2)
	
	# SOM initial learning rate (floating point) [0.0:inf]
	learningRates=(0 5 2.5 7.5 3.75 8.75 1.25 6.25 3.125 8.125 0.625 5.625 1.875 6.875 4.375 9.375 4.6875 9.6875 2.1875 7.1875 0.9375 5.9375 3.4375 8.4375 1.5625 6.5625 4.0625 9.0625 2.8125 7.8125 0.3125 5.3125 2.65625 7.65625 0.15625 5.15625 1.40625 6.40625 3.90625 8.90625 0.78125 5.78125 3.28125 8.28125 4.53125 9.53125 2.03125 7.03125 2.34375 7.34375 4.84375 9.84375 3.59375 8.59375 1.09375 6.09375 4.21875 9.21875 1.71875 6.71875 0.46875 5.46875 2.96875 7.96875 3.984375 8.984375 1.484375 6.484375 0.234375 5.234375 2.734375 7.734375 2.109375 7.109375 4.609375 9.609375 3.359375 8.359375 0.859375 5.859375 1.171875 6.171875 3.671875 8.671875 4.921875 9.921875 2.421875 7.421875 3.046875 8.046875 0.546875 5.546875 1.796875 6.796875 4.296875 9.296875 1.328125 6.328125 3.828125 8.828125 2.578125 7.578125 0.078125 5.078125 4.453125 9.453125 1.953125 6.953125 0.703125 5.703125 3.203125 8.203125 3.515625 8.515625 1.015625 6.015625 2.265625 7.265625 4.765625 9.765625 0.390625 5.390625 2.890625 7.890625 4.140625 9.140625 1.640625 6.640625 3.3203125 8.3203125 0.8203125 5.8203125 2.0703125 7.0703125 4.5703125 9.5703125 0.1953125 5.1953125 2.6953125 7.6953125 3.9453125 8.9453125 1.4453125 6.4453125 1.7578125 6.7578125 4.2578125 9.2578125 3.0078125 8.0078125 0.5078125 5.5078125 4.8828125 9.8828125 2.3828125 7.3828125 1.1328125 6.1328125 3.6328125 8.6328125 0.6640625 5.6640625 3.1640625 8.1640625 4.4140625 9.4140625 1.9140625 6.9140625 2.5390625 7.5390625 0.0390625 5.0390625 1.2890625 6.2890625 3.7890625 8.7890625 4.1015625 9.1015625 1.6015625 6.6015625 0.3515625 5.3515625 2.8515625 7.8515625 2.2265625 7.2265625 4.7265625 9.7265625 3.4765625 8.4765625 0.9765625 5.9765625 1.9921875 6.9921875 4.4921875 9.4921875 3.2421875 8.2421875 0.7421875 5.7421875 3.8671875 8.8671875 1.3671875 6.3671875 0.1171875 5.1171875 2.6171875 7.6171875 2.9296875 7.9296875 0.4296875 5.4296875 1.6796875 6.6796875 4.1796875 9.1796875 1.0546875 6.0546875 3.5546875 8.5546875 4.8046875 9.8046875 2.3046875 7.3046875 4.6484375 9.6484375 2.1484375 7.1484375 0.8984375 5.8984375 3.3984375 8.3984375 1.5234375 6.5234375 4.0234375 9.0234375 2.7734375 7.7734375 0.2734375 5.2734375 0.5859375 5.5859375 3.0859375 8.0859375 4.3359375 9.3359375 1.8359375 6.8359375 3.7109375 8.7109375 1.2109375 6.2109375 2.4609375 7.4609375 4.9609375 9.9609375 4.98046875 9.98046875 2.48046875 7.48046875 1.23046875 6.23046875 3.73046875 8.73046875 1.85546875 6.85546875 4.35546875 9.35546875 3.10546875 8.10546875 0.60546875 5.60546875 0.29296875 5.29296875 2.79296875 7.79296875 4.04296875 9.04296875 1.54296875 6.54296875 3.41796875 8.41796875 0.91796875 5.91796875 2.16796875 7.16796875 4.66796875 9.66796875 2.32421875 7.32421875 4.82421875 9.82421875 3.57421875 8.57421875 1.07421875 6.07421875 4.19921875 9.19921875 1.69921875 6.69921875 0.44921875 5.44921875 2.94921875 7.94921875 2.63671875 7.63671875 0.13671875 5.13671875 1.38671875 6.38671875 3.88671875 8.88671875 0.76171875 5.76171875 3.26171875 8.26171875 4.51171875 9.51171875 2.01171875 7.01171875 0.99609375 5.99609375 3.49609375 8.49609375 4.74609375 9.74609375 2.24609375 7.24609375 2.87109375 7.87109375 0.37109375 5.37109375 1.62109375 6.62109375 4.12109375 9.12109375 3.80859375 8.80859375 1.30859375 6.30859375 0.05859375 5.05859375 2.55859375 7.55859375 1.93359375 6.93359375 4.43359375 9.43359375 3.18359375 8.18359375 0.68359375 5.68359375 3.65234375 8.65234375 1.15234375 6.15234375 2.40234375 7.40234375 4.90234375 9.90234375 0.52734375 5.52734375 3.02734375 8.02734375 4.27734375 9.27734375 1.77734375 6.77734375 1.46484375 6.46484375 3.96484375 8.96484375 2.71484375 7.71484375 0.21484375 5.21484375 4.58984375 9.58984375 2.08984375 7.08984375 0.83984375 5.83984375 3.33984375 8.33984375 1.66015625 6.66015625 4.16015625 9.16015625 2.91015625 7.91015625 0.41015625 5.41015625 4.78515625 9.78515625 2.28515625 7.28515625 1.03515625 6.03515625 3.53515625 8.53515625 3.22265625 8.22265625 0.72265625 5.72265625 1.97265625 6.97265625 4.47265625 9.47265625 0.09765625 5.09765625 2.59765625 7.59765625 3.84765625 8.84765625 1.34765625 6.34765625 4.31640625 9.31640625 1.81640625 6.81640625 0.56640625 5.56640625 3.06640625 8.06640625 2.44140625 7.44140625 4.94140625 9.94140625 3.69140625 8.69140625 1.19140625 6.19140625 0.87890625 5.87890625 3.37890625 8.37890625 4.62890625 9.62890625 2.12890625 7.12890625 2.75390625 7.75390625 0.25390625 5.25390625 1.50390625 6.50390625 4.00390625 9.00390625 2.98828125 7.98828125 0.48828125 5.48828125 1.73828125 6.73828125 4.23828125 9.23828125 1.11328125 6.11328125 3.61328125 8.61328125 4.86328125 9.86328125 2.36328125 7.36328125 2.05078125 7.05078125 4.55078125 9.55078125 3.30078125 8.30078125 0.80078125 5.80078125 3.92578125 8.92578125 1.42578125 6.42578125 0.17578125 5.17578125 2.67578125 7.67578125 0.33203125 5.33203125 2.83203125 7.83203125 4.08203125 9.08203125 1.58203125 6.58203125 3.45703125 8.45703125 0.95703125 5.95703125 2.20703125 7.20703125 4.70703125 9.70703125 4.39453125 9.39453125 1.89453125 6.89453125 0.64453125 5.64453125 3.14453125 8.14453125 1.26953125 6.26953125 3.76953125 8.76953125 2.51953125 7.51953125 0.01953125 5.01953125)
	
	# SOM learning rate decay constant (floating point) (0.0:inf]
	learningRateDecays=(0.000000001 750.0000000005 375.00000000075 1125.00000000025 937.500000000375 187.500000000875 1312.50000000013 562.500000000625 1406.25000000006 656.250000000563 1031.25000000031 281.250000000813 468.750000000687 1218.75000000019 93.7500000009375 843.750000000438 703.125000000531 1453.12500000003 328.125000000781 1078.12500000028 1265.62500000016 515.625000000656 890.625000000406 140.625000000906 796.875000000469 46.8750000009687 1171.87500000022 421.875000000719 234.375000000844 984.375000000344 609.375000000594 1359.37500000009 1054.6875000003 304.687500000797 1429.68750000005 679.687500000547 117.187500000922 867.187500000422 492.187500000672 1242.18750000017 398.437500000734 1148.43750000023 23.4375000009844 773.437500000484 1335.93750000011 585.937500000609 960.937500000359 210.937500000859 1195.3125000002 445.312500000703 820.312500000453 70.3125000009531 632.812500000578 1382.81250000008 257.812500000828 1007.81250000033 351.562500000766 1101.56250000027 726.562500000516 1476.56250000002 914.062500000391 164.062500000891 1289.06250000014 539.062500000641 1230.46875000018 480.46875000068 855.46875000043 105.46875000093 667.968750000555 1417.96875000005 292.968750000805 1042.9687500003 199.218750000867 949.218750000367 574.218750000617 1324.21875000012 761.718750000492 11.7187500009922 1136.71875000024 386.718750000742 996.093750000336 246.093750000836 1371.09375000009 621.093750000586 58.5937500009609 808.593750000461 433.593750000711 1183.59375000021 527.343750000648 1277.34375000015 152.343750000898 902.343750000398 1464.84375000002 714.843750000523 1089.84375000027 339.843750000773 597.656250000602 1347.6562500001 222.656250000852 972.656250000352 1160.15625000023 410.156250000727 785.156250000477 35.1562500009766 878.906250000414 128.906250000914 1253.90625000016 503.906250000664 316.406250000789 1066.40625000029 691.406250000539 1441.40625000004 175.781250000883 925.781250000383 550.781250000633 1300.78125000013 1113.28125000026 363.281250000758 1488.28125000001 738.281250000508 1394.53125000007 644.53125000057 1019.53125000032 269.53125000082 457.031250000695 1207.0312500002 82.0312500009453 832.031250000445 439.453125000707 1189.45312500021 64.453125000957 814.453125000457 1376.95312500008 626.953125000582 1001.95312500033 251.953125000832 1095.70312500027 345.70312500077 1470.70312500002 720.70312500052 158.203125000895 908.203125000395 533.203125000644 1283.20312500014 298.828125000801 1048.8281250003 673.828125000551 1423.82812500005 861.328125000426 111.328125000926 1236.32812500018 486.328125000676 1142.57812500024 392.578125000738 767.578125000488 17.5781250009883 580.078125000613 1330.07812500011 205.078125000863 955.078125000363 1494.140625 744.140625000504 1119.14062500025 369.140625000754 556.640625000629 1306.64062500013 181.640625000879 931.640625000379 87.8906250009414 837.890625000441 462.890625000691 1212.89062500019 1025.39062500032 275.390625000816 1400.39062500007 650.390625000566 791.015625000473 41.0156250009727 1166.01562500022 416.015625000723 228.515625000848 978.515625000348 603.515625000598 1353.5156250001 697.265625000535 1447.26562500004 322.265625000785 1072.26562500029 1259.76562500016 509.76562500066 884.76562500041 134.76562500091 896.484375000402 146.484375000902 1271.48437500015 521.484375000652 333.984375000777 1083.98437500028 708.984375000527 1458.98437500003 615.23437500059 1365.23437500009 240.23437500084 990.23437500034 1177.73437500022 427.734375000715 802.734375000465 52.7343750009648 1318.35937500012 568.359375000621 943.359375000371 193.359375000871 380.859375000746 1130.85937500025 5.85937500099609 755.859375000496 99.6093750009336 849.609375000434 474.609375000684 1224.60937500018 1037.10937500031 287.109375000809 1412.10937500006 662.109375000559 263.671875000824 1013.67187500032 638.671875000574 1388.67187500007 826.171875000449 76.1718750009492 1201.1718750002 451.171875000699 1294.92187500014 544.921875000637 919.921875000387 169.921875000887 732.421875000512 1482.42187500001 357.421875000762 1107.42187500026 498.046875000668 1248.04687500017 123.046875000918 873.046875000418 1435.54687500004 685.546875000543 1060.54687500029 310.546875000793 966.796875000355 216.796875000855 1341.79687500011 591.796875000606 29.2968750009805 779.29687500048 404.29687500073 1154.29687500023 1016.60156250032 266.601562500822 1391.60156250007 641.601562500572 79.1015625009473 829.101562500447 454.101562500697 1204.1015625002 547.851562500635 1297.85156250013 172.851562500885 922.851562500385 1485.35156250001 735.35156250051 1110.35156250026 360.35156250076 1250.97656250017 500.976562500666 875.976562500416 125.976562500916 688.476562500541 1438.47656250004 313.476562500791 1063.47656250029 219.726562500853 969.726562500354 594.726562500604 1344.7265625001 782.226562500479 32.2265625009785 1157.22656250023 407.226562500729 149.4140625009 899.4140625004 524.41406250065 1274.41406250015 1086.91406250028 336.914062500775 1461.91406250003 711.914062500525 1368.16406250009 618.164062500588 993.164062500338 243.164062500838 430.664062500713 1180.66406250021 55.6640625009629 805.664062500463 571.289062500619 1321.28906250012 196.289062500869 946.289062500369 1133.78906250024 383.789062500744 758.789062500494 8.78906250099414 852.539062500432 102.539062500932 1227.53906250018 477.539062500682 290.039062500807 1040.03906250031 665.039062500557 1415.03906250006 747.070312500502 1497.0703125 372.070312500752 1122.07031250025 1309.57031250013 559.570312500627 934.570312500377 184.570312500877 840.82031250044 90.8203125009395 1215.82031250019 465.82031250069 278.320312500814 1028.32031250031 653.320312500564 1403.32031250006 43.9453125009707 793.945312500471 418.945312500721 1168.94531250022 981.445312500346 231.445312500846 1356.4453125001 606.445312500596 1450.19531250003 700.195312500533 1075.19531250028 325.195312500783 512.695312500658 1262.69531250016 137.695312500908 887.695312500408 1192.38281250021 442.382812500705 817.382812500455 67.3828125009551 629.88281250058 1379.88281250008 254.88281250083 1004.88281250033 348.632812500768 1098.63281250027 723.632812500518 1473.63281250002 911.132812500393 161.132812500893 1286.13281250014 536.132812500643 1051.7578125003 301.757812500799 1426.75781250005 676.757812500549 114.257812500924 864.257812500424 489.257812500674 1239.25781250017 395.507812500736 1145.50781250024 20.5078125009863 770.507812500486 1333.00781250011 583.007812500611 958.007812500361 208.007812500861 1350.5859375001 600.5859375006 975.58593750035 225.58593750085 413.085937500725 1163.08593750022 38.0859375009746 788.085937500475 131.835937500912 881.835937500412 506.835937500662 1256.83593750016 1069.33593750029 319.335937500787 1444.33593750004 694.335937500537 928.710937500381 178.710937500881 1303.71093750013 553.710937500631 366.210937500756 1116.21093750026 741.210937500506 1491.21093750001 647.460937500568 1397.46093750007 272.460937500818 1022.46093750032 1209.96093750019 459.960937500693 834.960937500443 84.9609375009434 483.398437500678 1233.39843750018 108.398437500928 858.398437500428 1420.89843750005 670.898437500553 1045.8984375003 295.898437500803 952.148437500365 202.148437500865 1327.14843750012 577.148437500615 14.6484375009902 764.64843750049 389.64843750074 1139.64843750024 249.023437500834 999.023437500334 624.023437500584 1374.02343750008 811.523437500459 61.523437500959 1186.52343750021 436.523437500709 1280.27343750015 530.273437500646 905.273437500397 155.273437500896 717.773437500522 1467.77343750002 342.773437500772 1092.77343750027 307.617187500795 1057.61718750029 682.617187500545 1432.61718750005 870.11718750042 120.11718750092 1245.11718750017 495.11718750067 1151.36718750023 401.367187500732 776.367187500482 26.3671875009824 588.867187500607 1338.86718750011 213.867187500857 963.867187500357 448.242187500701 1198.2421875002 73.2421875009512 823.242187500451 1385.74218750008 635.742187500576 1010.74218750033 260.742187500826 1104.49218750026 354.492187500764 1479.49218750001 729.492187500514 166.992187500889 916.992187500389 541.992187500639 1291.99218750014 752.929687500498 2.92968750099805 1127.92968750025 377.929687500748 190.429687500873 940.429687500373 565.429687500623 1315.42968750012 659.179687500561 1409.17968750006 284.179687500811 1034.17968750031 1221.67968750019 471.679687500686 846.679687500436 96.6796875009356 1456.05468750003 706.054687500529 1081.05468750028 331.054687500779 518.554687500654 1268.55468750015 143.554687500904 893.554687500404 49.8046875009668 799.804687500467 424.804687500717 1174.80468750022 987.304687500342 237.304687500842 1362.30468750009 612.304687500592)
	
	# SOM initial kernel width (floating point) (0.0:inf]
	kernelWidths=(0.000000002 3.5000000035 2.5000000075 3.75000000125 5.25000000075 4.125000006875 5.000000003 0.375000002625 1.75000000225 8.4375000005625 2.0625000089375 4.125000001875 2.8125000021875 0.625000009375 6.5000000015 0.9375000020625 1.96875000103125 1.25000000675 9.0625000009375 2.03125000296875 1.96875000503125 9.375000002625 0.28125000871875 2.125000001875 3.375000000625 3.09375000590625 6.53125000446875 0.5625000054375 1.09375000390625 7.1875000028125 3.28125000371875 1.9375000000625 1.09375000090625 0.328125006671875 7.96875000203125 1.48437500351563 2.53125000346875 10.1406250008594 1.54687500745313 2.6875000013125 3.9375000000625 4.35937500464063 8.8125000031875 1.64062500535938 0.65625000534375 6.70312500429688 2.875000005125 2.57812500042187 0.421875002578125 5.125000002875 3.90625000609375 4.45312500054687 5.35937500164062 3.1875000088125 4.64062500435938 0.0625000039375 0.984375002015625 6.625000001375 0.859375010140625 3.46875000253125 3.51562500148437 2.03125000796875 6.67187500032813 0.90625000109375 1.67187500032813 2.35156250464844 5.85937500414063 0.429687504570313 1.26562500473438 7.82031250317969 3.6875000043125 2.88281250011719 2.59375000140625 1.33593750766406 10.7812500012188 2.78906250421094 1.36718750363281 7.73437500226563 0.1875000078125 1.57031250142969 1.47656250152344 7.9375000000625 2.66406250833594 4.45312500154687 4.32031250267969 1.40625001059375 7.80468750119531 1.46875000253125 0.21875000378125 4.99218750400781 3.35156250764844 4.82812500117188 4.64843750035156 4.29687500570313 5.4375000025625 0.539062502460938 0.703125001296875 5.96093750103906 1.01562500898438 3.00781250199219 4.35937500164063 2.49218750850781 8.78906250021094 1.90625000209375 0.65625000334375 5.97656250302344 4.96875000703125 6.39843750060156 4.73437500126563 3.17968750782031 4.3125000036875 0.117187502882813 2.83593750016406 3.5625000044375 6.95312500304688 0.976562504023438 0.421875005578125 6.27343750472656 2.88281250611719 3.28125000071875 1.52343750147656 0.0625000079375 8.33593750266406 1.54687500445313 1.91406250308594 8.82812500117188 0.929687506070313 1.26562500073438 0.382812501617187 4.83984375216016 4.41406250558594 4.70703125029297 4.89843750110156 3.48046875751953 4.53125000346875 0.199218752800781 1.01562500298438 6.78515625221484 0.0429687609570313 3.02343750297656 3.14453125185547 1.28906250871094 7.03125000096875 1.13671875186328 1.79296875120703 0.78125000721875 9.32421875167578 2.08593750391406 3.30859375369141 11.6718750003281 2.00390625699609 2.89062500110937 3.64062500035938 3.69140625530859 7.26171875373828 0.960937505039063 0.175781254824219 5.35156250464844 1.99609375500391 1.57031250042969 2.21484375078516 1.90625000609375 9.88281250011719 2.44140625255859 2.17968750382031 9.49609375150391 1.01953125798047 2.45312500154687 3.20312500079687 2.70703125629297 6.60937500539063 0.355468756644531 1.05468750494531 7.43359375356641 3.40625000459375 2.77734375022266 0.246093752753906 4.65625000334375 3.32031250667969 4.16015625083984 6.69921875030078 5.48437500651563 6.36328125263672 0.828125003171875 1.57812500242188 8.05078125094922 1.58984375941016 3.86718750213281 2.59765625240234 0.195312509804688 5.38671875161328 0.539062501460938 1.80468750019531 2.81640625418359 6.52343750347656 0.761718754238281 0.164062505835938 5.80078125519922 2.21875000578125 2.33203125066797 2.35937500164062 0.808593758191406 10.0781250019219 2.37890625462109 2.32421875267578 9.64843750035156 1.71875000628125 2.14453125085547 0.925781252074219 6.46875000153125 0.644531260355469 3.35156250264844 4.78515625221484 2.20312500979687 8.40234375059766 1.73437500226563 0.984375003015625 6.71484375228516 5.45703125554297 5.97656250002344 4.35546875064453 3.71093750628906 4.96875000303125 0.363281252636719 0.835937501164063 6.42578125057422 1.67968750832031 3.33984375166016 3.25781250274219 0.472656260527344 7.13671875186328 1.17187500282813 0.421875003578125 5.44921875355078 4.26562500773438 5.98828125101172 4.90234375009766 4.80468750519531 5.84375000215625 0.691406252308594 2.28515625071484 2.09375000590625 5.11718750488281 0.0585937549414062 0.820312505179687 7.00390625399609 3.48046875551953 3.54687500045312 2.09765625090234 1.59375000640625 10.4414062505586 2.69531250330469 1.62109375337891 8.24218750175781 0.519531256480469 1.14843750085156 0.589843751410156 5.56445312643555 0.449218759550781 2.72460937727539 4.01953125198047 1.86914063413086 7.35937500064063 1.25976562674023 0.929687503070313 6.5917968774082 5.30664063069336 5.89453125010547 4.28710937571289 3.57421875642578 4.85937500314062 0.322265627677734 2.66601562533398 3.10937500489063 6.38671875361328 0.693359379306641 0.0957031319042969 6.16406250583594 2.37304688162695 3.05468750094531 2.30468750169531 0.685546883314453 9.08789062691211 1.95703125404297 2.25585937774414 9.51171875048828 1.4082031305918 1.40234375059766 2.33789062566211 2.23437500576563 5.29296875470703 0.146484379853516 0.925781255074219 7.19726562880273 3.63867188036133 3.61718750038281 2.86718750113281 1.95117188204883 11.6015625003984 3.26757812873242 2.05078125394922 9.25976562674023 0.734375007265625 1.77539062622461 1.30664062669336 7.48437500051563 1.85546875814453 3.42773437657227 3.92382812807617 0.726562511273438 7.29492187670508 1.24218750275781 0.369140627630859 4.98437500301563 4.10351563189649 5.23828125076172 4.99023437500977 4.98046875501953 5.23632812676367 0.496093751503906 1.23046875076953 0.806640631193359 8.65234375134766 1.82617187817383 2.94140625305859 10.8925781251074 2.16210938183789 2.96093750103906 3.71093750028906 3.84960938015039 8.13281250386719 1.24414063075586 0.263671879736328 5.52734375447266 2.42187500557812 2.4082031255918 0.626953127373047 5.67187500232813 5.04882813095117 5.7539062502461 5.83789062616211 4.00781250799219 5.25585937874414 0.335937503664062 1.08593750291406 6.94335937705664 0.236328135763672 3.12890625287109 3.23242187676758 1.46484375853516 7.17187500082813 1.18945312681055 0.136718751863281 3.97851562802148 3.18359375681641 4.0917968759082 5.66015625033984 4.87695313112305 6.24023437775977 0.773437503226563 1.52343750247656 7.92773437607227 1.57031251042969 4.41601562758398 3.03515625296484 0.0644531359355469 6.04687500195313 0.767578127232422 2.17382812582617 1.79687500620313 9.74609375025391 2.37304687762695 2.44726562955273 10.1953125018047 0.896484383103516 2.39843750160156 2.36132812563867 2.29687500570312 5.9082031300918 0.222656255777344 0.810546879189453 6.62109375337891 2.88476562911523 1.82421875017578 0.957031251042969 6.84960937515039 2.28515625771484 3.64257812635742 3.62109375237891 1.13867188486133 6.82812500117188 1.06054687693945 0.164062503835938 4.86914062913086 3.20117188279883 4.74609375125391 4.58007812541992 4.16015625583984 5.32812500267188 0.498046877501953 2.4667968755332 2.57812500542188 6.29492187970508 0.433593755566406 1.38085938061914 8.36718750363281 4.02539062997461 3.78906250021094 2.53906250146094 1.21289063278711 9.73242187626758 2.30859375369141 1.29882812870117 7.59765625240234 0.0683593819316406 1.01953125098047 2.88867187511133 3.70312500429688 7.12890625287109 1.06445312893555 0.527343755472656 6.4667968795332 3.04101563095898 3.35156250064844 2.10156250189844 0.228515633771484 9.30468750269531 1.92773438007227 2.40234375359766 9.9042968760957 1.20312500679688 1.95117187604883 1.10742187689258 6.95312500104687 1.19140625880859 3.0957031269043 5.20898437679102 2.92968750907031 8.94726562505274 1.97656250202344 0.726562503273438 6.13476562786523 4.74804688125195 5.58984375041016 4.0332031259668 3.06640625693359 3.89648437810352 0.113281251886719 1.34765625065234 1.2167968807832 9.23828125076172 2.11914062788086 1.79296875420703 8.78710937721289 0.390625007609375 1.64648437635352 3.44531250055469 3.25195313074805 7.33593750466406 0.779296881220703 1.18164062881836 7.36328125263672 3.89062500410938 2.95898437504102 0.0527343779472656 4.14062500385938 2.94335938305664 4.60546875139453 6.24804687575195 4.71093750728906 5.7832031282168 0.570312503429688 1.82031250217969 8.5957031254043 2.25585938374414 4.23046875176953 2.90039062709961 0.800781259199219 5.81054687618945 0.660156251339844 0.253906251746094 4.38867187761133 3.76953125623047 4.38476562561523 4.51171875148828 2.77148438322852 4.51757812948242 0.0078125039921875 1.25781250274219 7.33007812666992 0.773437511226563 3.95117187804883 3.44726562655273 1.89453125810547 7.51562500048438 1.31835937668164 1.59960937640039 0.265625007734375 7.83203125216797 1.41601562858398 2.44921875355078 9.99023437600977 1.42382813257617 2.63281250136719 2.91210937508789 3.76562500423438 7.92773437807227 1.32421875467578 0.478515629521484 5.95703125404297 2.41992187958008 1.69140625030859)
	
	# SOM radius decay constant (floating point) (0.0:inf]
	kernelWidthDecays=(0.000000001 50.0000000005 75.00000000025 25.00000000075 37.500000000625 87.500000000125 62.500000000375 12.500000000875 56.2500000004375 6.2500000009375 31.2500000006875 81.2500000001875 93.7500000000625 43.7500000005625 18.7500000008125 68.7500000003125 28.1250000007187 78.1250000002188 53.1250000004687 3.12500000096875 15.6250000008438 65.6250000003437 90.6250000000938 40.6250000005938 84.3750000001563 34.3750000006562 9.37500000090625 59.3750000004062 71.8750000002813 21.8750000007812 46.8750000005313 96.8750000000313 14.0625000008594 64.0625000003594 89.0625000001094 39.0625000006094 26.5625000007344 76.5625000002344 51.5625000004844 1.56250000098438 70.3125000002969 20.3125000007969 45.3125000005469 95.3125000000469 82.8125000001719 32.8125000006719 7.81250000092188 57.8125000004219 42.1875000005781 92.1875000000781 67.1875000003281 17.1875000008281 4.68750000095313 54.6875000004531 79.6875000002031 29.6875000007031 98.4375000000156 48.4375000005156 23.4375000007656 73.4375000002656 60.9375000003906 10.9375000008906 35.9375000006406 85.9375000001406 64.8437500003516 14.8437500008516 39.8437500006016 89.8437500001016 77.3437500002266 27.3437500007266 2.34375000097656 52.3437500004766 21.0937500007891 71.0937500002891 96.0937500000391 46.0937500005391 33.5937500006641 83.5937500001641 58.5937500004141 8.59375000091406 92.9687500000703 42.9687500005703 17.9687500008203 67.9687500003203 55.4687500004453 5.46875000094531 30.4687500006953 80.4687500001953 49.2187500005078 99.2187500000078 74.2187500002578 24.2187500007578 11.7187500008828 61.7187500003828 86.7187500001328 36.7187500006328 50.7812500004922 0.781250000992187 25.7812500007422 75.7812500002422 88.2812500001172 38.2812500006172 13.2812500008672 63.2812500003672 7.03125000092969 57.0312500004297 82.0312500001797 32.0312500006797 44.5312500005547 94.5312500000547 69.5312500003047 19.5312500008047 78.9062500002109 28.9062500007109 3.90625000096094 53.9062500004609 66.4062500003359 16.4062500008359 41.4062500005859 91.4062500000859 35.1562500006484 85.1562500001484 60.1562500003984 10.1562500008984 22.6562500007734 72.6562500002734 97.6562500000234 47.6562500005234 90.2343750000977 40.2343750005977 15.2343750008477 65.2343750003477 52.7343750004727 2.73437500097266 27.7343750007227 77.7343750002227 46.4843750005352 96.4843750000352 71.4843750002852 21.4843750007852 8.98437500091016 58.9843750004102 83.9843750001602 33.9843750006602 68.3593750003164 18.3593750008164 43.3593750005664 93.3593750000664 80.8593750001914 30.8593750006914 5.85937500094141 55.8593750004414 24.6093750007539 74.6093750002539 99.6093750000039 49.6093750005039 37.1093750006289 87.1093750001289 62.1093750003789 12.1093750008789 76.1718750002383 26.1718750007383 1.17187500098828 51.1718750004883 63.6718750003633 13.6718750008633 38.6718750006133 88.6718750001133 32.4218750006758 82.4218750001758 57.4218750004258 7.42187500092578 19.9218750008008 69.9218750003008 94.9218750000508 44.9218750005508 54.296875000457 4.29687500095703 29.296875000707 79.296875000207 91.796875000082 41.796875000582 16.796875000832 66.796875000332 10.5468750008945 60.5468750003945 85.5468750001445 35.5468750006445 48.0468750005195 98.0468750000195 73.0468750002695 23.0468750007695 25.3906250007461 75.3906250002461 50.3906250004961 0.390625000996094 12.8906250008711 62.8906250003711 87.8906250001211 37.8906250006211 81.6406250001836 31.6406250006836 6.64062500093359 56.6406250004336 69.1406250003086 19.1406250008086 44.1406250005586 94.1406250000586 3.51562500096484 53.5156250004648 78.5156250002148 28.5156250007148 41.0156250005898 91.0156250000899 66.0156250003398 16.0156250008398 59.7656250004023 9.76562500090234 34.7656250006523 84.7656250001523 97.2656250000273 47.2656250005273 22.2656250007773 72.2656250002773 39.4531250006055 89.4531250001055 64.4531250003555 14.4531250008555 1.95312500098047 51.9531250004805 76.9531250002305 26.9531250007305 95.703125000043 45.703125000543 20.703125000793 70.703125000293 58.203125000418 8.20312500091797 33.203125000668 83.203125000168 17.5781250008242 67.5781250003242 92.5781250000742 42.5781250005742 30.0781250006992 80.0781250001992 55.0781250004492 5.07812500094922 73.8281250002617 23.8281250007617 48.8281250005117 98.8281250000117 86.3281250001367 36.3281250006367 11.3281250008867 61.3281250003867 77.9296875002207 27.9296875007207 2.9296875009707 52.9296875004707 65.4296875003457 15.4296875008457 40.4296875005957 90.4296875000957 34.1796875006582 84.1796875001582 59.1796875004082 9.1796875009082 21.6796875007832 71.6796875002832 96.6796875000332 46.6796875005332 56.0546875004395 6.05468750093945 31.0546875006895 81.0546875001895 93.5546875000645 43.5546875005644 18.5546875008145 68.5546875003145 12.304687500877 62.304687500377 87.304687500127 37.3046875006269 49.804687500502 99.804687500002 74.804687500252 24.804687500752 88.8671875001113 38.8671875006113 13.8671875008613 63.8671875003613 51.3671875004863 1.36718750098633 26.3671875007363 76.3671875002363 45.1171875005488 95.1171875000489 70.1171875002988 20.1171875007988 7.61718750092383 57.6171875004238 82.6171875001738 32.6171875006738 66.9921875003301 16.9921875008301 41.9921875005801 91.9921875000801 79.4921875002051 29.4921875007051 4.49218750095508 54.4921875004551 23.2421875007676 73.2421875002676 98.2421875000176 48.2421875005176 35.7421875006426 85.7421875001426 60.7421875003926 10.7421875008926 38.0859375006191 88.0859375001191 63.0859375003691 13.0859375008691 0.585937500994141 50.5859375004941 75.5859375002441 25.5859375007441 94.3359375000567 44.3359375005566 19.3359375008066 69.3359375003066 56.8359375004316 6.83593750093164 31.8359375006816 81.8359375001817 16.2109375008379 66.2109375003379 91.2109375000879 41.2109375005879 28.7109375007129 78.7109375002129 53.7109375004629 3.71093750096289 72.4609375002754 22.4609375007754 47.4609375005254 97.4609375000254 84.9609375001504 34.9609375006504 9.96093750090039 59.9609375004004 27.1484375007285 77.1484375002285 52.1484375004785 2.14843750097852 14.6484375008535 64.6484375003535 89.6484375001035 39.6484375006035 83.398437500166 33.398437500666 8.39843750091602 58.398437500416 70.898437500291 20.898437500791 45.898437500541 95.898437500041 5.27343750094727 55.2734375004473 80.2734375001973 30.2734375006973 42.7734375005723 92.7734375000723 67.7734375003223 17.7734375008223 61.5234375003848 11.5234375008848 36.5234375006348 86.5234375001348 99.0234375000098 49.0234375005098 24.0234375007598 74.0234375002598 12.695312500873 62.695312500373 87.6953125001231 37.695312500623 25.195312500748 75.1953125002481 50.195312500498 0.195312500998047 68.9453125003106 18.9453125008105 43.9453125005605 93.9453125000606 81.4453125001856 31.4453125006855 6.44531250093555 56.4453125004355 40.8203125005918 90.8203125000918 65.8203125003418 15.8203125008418 3.3203125009668 53.3203125004668 78.3203125002168 28.3203125007168 97.0703125000293 47.0703125005293 22.0703125007793 72.0703125002793 59.5703125004043 9.5703125009043 34.5703125006543 84.5703125001543 1.75781250098242 51.7578125004824 76.7578125002324 26.7578125007324 39.2578125006074 89.2578125001074 64.2578125003574 14.2578125008574 58.0078125004199 8.00781250091992 33.0078125006699 83.0078125001699 95.5078125000449 45.5078125005449 20.5078125007949 70.5078125002949 29.8828125007012 79.8828125002012 54.8828125004512 4.88281250095117 17.3828125008262 67.3828125003262 92.3828125000762 42.3828125005762 86.1328125001387 36.1328125006387 11.1328125008887 61.1328125003887 73.6328125002637 23.6328125007637 48.6328125005137 98.6328125000137 52.5390625004746 2.53906250097461 27.5390625007246 77.5390625002246 90.0390625000996 40.0390625005996 15.0390625008496 65.0390625003496 8.78906250091211 58.7890625004121 83.7890625001621 33.7890625006621 46.2890625005371 96.2890625000371 71.2890625002871 21.2890625007871 80.6640625001934 30.6640625006934 5.66406250094336 55.6640625004434 68.1640625003184 18.1640625008184 43.1640625005684 93.1640625000684 36.9140625006309 86.9140625001308 61.9140625003809 11.9140625008809 24.4140625007559 74.4140625002559 99.4140625000059 49.4140625005059 63.4765625003652 13.4765625008652 38.4765625006152 88.4765625001152 75.9765625002402 25.9765625007402 0.976562500990234 50.9765625004902 19.7265625008027 69.7265625003027 94.7265625000528 44.7265625005527 32.2265625006777 82.2265625001777 57.2265625004277 7.22656250092773 91.601562500084 41.601562500584 16.601562500834 66.601562500334 54.101562500459 4.10156250095898 29.101562500709 79.101562500209 47.8515625005215 97.8515625000215 72.8515625002715 22.8515625007715 10.3515625008965 60.3515625003965 85.3515625001465 35.3515625006465)
	
	# check that all arrays are the same length (otherwise we can't run through all parameter settings)
	if [ ${#mapDimensions[*]} -ne ${#learningRates[*]} ] || [ ${#mapDimensions[*]} -ne ${#learningRateDecays[*]} ] || [ ${#mapDimensions[*]} -ne ${#kernelWidths[*]} ] || [ ${#mapDimensions[*]} -ne ${#kernelWidthDecays[*]} ]; then
		echo "Error: parameter array sizes do not match"
		rm -f *.train *.test *.names
		exit
	fi
	
	# check for valid labeling method
	if [ ${neuronLabelingMethod} -ne 0 ] && [ ${neuronLabelingMethod} -ne 1 ] && [ ${neuronLabelingMethod} -ne 2 ] && [ ${neuronLabelingMethod} -ne 3 ]; then
		echo "Error: Invalid neuron labeling method"
		rm -f *.train *.test *.names
		exit
	fi
	
	# pre-generate initialized maps for each of the specified map dimensions (since this is a time-consuming task)
	echo "Generating maps..."
	
	for ((position = 0; position < ${#mapDimensions[*]}; ++position))
	do
		
		if [ ! -f ${1}.${mapDimensions[position]}.0.map ]; then
			echo -n "Map dimension ${mapDimensions[position]} x ${mapDimensions[position]}: "
			
			for ((simNum = 0; simNum < 30; ++simNum))
			do
				echo -n "$simNum "
				sleep 1
				./../../algorithms/SOM_PAK/lininit -din ${1}.data.${simNum}.som.train -cout ${1}.${mapDimensions[position]}.${simNum}.map -topol hexa -neigh gaussian -xdim ${mapDimensions[position]} -ydim ${mapDimensions[position]} > /dev/null
			done
			
			echo
		fi
		
	done
	
	echo "=============================================="
	
	for ((position = 0; position < ${#mapDimensions[*]}; ++position))
	do
		echo "Simulation ${currentSimulation}"
		echo "=============================================="
		
		echo "Map dimensions: ${mapDimensions[position]} x ${mapDimensions[position]}"
		echo "Initial learning rate: ${learningRates[position]}"
		echo "Learning rate decay constant: ${learningRateDecays[position]}"
		echo "Kernel width: ${kernelWidths[position]}"
		echo "Radius decay constant: ${kernelWidthDecays[position]}"
		
		if [ ${neuronLabelingMethod} -eq 0 ]; then
			echo "Labeling method: example-centric neuron labeling"
		elif [ ${neuronLabelingMethod} -eq 1 ]; then
			echo "Labeling method: example-centric cluster labeling (K-Means)"
		elif [ ${neuronLabelingMethod} -eq 2 ]; then
			echo "Labeling method: example-centric cluster labeling (Ward)"
		elif [ ${neuronLabelingMethod} -eq 3 ]; then
			echo "Labeling method: weight-centric neuron labeling"
		fi
		
		# run 30 cross validated simulations
		runCrossValidation ${1} ${neuronLabelingMethod} ${mapDimensions[position]} ${learningRates[position]} ${learningRateDecays[position]} ${kernelWidths[position]} ${kernelWidthDecays[position]}
		
		echo "=============================================="
		let currentSimulation++
	done
	
	rm -f *.map
	
	echo "Status: Simulations completed"
	
}

# ===================================================================================================
# Function : cleanUp()
# Purpose  : Cleans up files created during simulation run
# Return   : None
# ===================================================================================================

cleanUp() {
	
	echo -n "Status: Cleaning up...  "
	
	# clean up created files
	rm *.names *.train *.test
	
	echo "DONE"
	
}

# ===================================================================================================
# Main script
# ===================================================================================================

export CLASSPATH=/home/wvheerden/Dropbox/Documents/Simulations/algorithms/BuildSets:/home/wvheerden/Dropbox/Documents/Simulations/algorithms/AverageRunResults:.

validateSystem ${1}
buildSets ${1}
runSims ${1}
cleanUp ${1}
